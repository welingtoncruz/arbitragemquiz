<dom-module id="quiz-play">
  <style>
    .pages {
      display: flex;
    }

    .question {
      font-size: 14px;
      height: 110px;
      background-color: #F5F5F5;
      color: #757575;
    }

    .app-icon {
      margin-left: 5px;
      width: 10%;
    }

    .countdown {
      margin-right: 40px;
    }

    .count {
      width: 78%;
      text-align: center;
      margin: auto;
      font-size: 30px;
      border-radius: 50px;
      overflow: hidden;
    }

    /* Height of the scroll area */
    .content {
      margin-top: auto;
      height: 100%;
    }

    .description {
      width: 98%;
      margin: 10px auto;
    }

    .icon-quiz {
      margin-top: 3px;
      width: 50px;
      height: 50px;
    }

    .bola-futebol {
      background-image: url("../../images/bola-futebol.png");
      height: 55px;
      width: 55px;
      background-repeat:no-repeat;
      background-size:contain;
    }

    ninja-countdown {
      position: absolute;
      margin-top: 18px;
      margin-left: 5px;
    }

    .fluxo {
      display: flex;
      width: 100%;
    }

    paper-button {
      display: block;
      margin-bottom: 24px;
      color: #FFFFFF;
      background-color: var(--default-primary-color);
    }


  </style>
  <template>
        <paper-toolbar id="mainToolbar">
          <!-- Application name -->
          <div class="horizontal layout" style="width: 100%; position: absolute">
            <div class="app-icon"><iron-icon class="icon-quiz" src="../../images/touch/chrome-touch-icon-192x192.png"></iron-icon></div>
            <div class="count"><b>{{questionNumber}}</b>/<b>{{questions.length}}</b></div>
            <div class="countdown">
              <div class="bola-futebol">
                <ninja-countdown id="countdown" init-mins="30" auto show-mins show-secs></ninja-countdown>
              </div>
            </div>
          </div>
        </paper-toolbar>

        <!-- Main Content -->
        <div class="content">
          <iron-pages id="page-question" selected="0">
            <template is="dom-repeat" items="{{questions}}">
              <quiz-question question="{{item}}"></quiz-question>
            </template>
          </iron-pages>

          <div class="fluxo">
            <div style="width: 85%">
              <paper-icon-button icon="arrow-back" alt="arrow-back" class="orange" on-tap="back"></paper-icon-button>
            </div>
            <div>
              <paper-icon-button icon="arrow-forward" alt="arrow-forward" class="green" on-tap="forward"></paper-icon-button>
            </div>
          </div>

          <paper-button attr-for-selected="data-route" on-tap="finish" raised>Finalizar</paper-button>

        </div>
  </template>

  <script>
    (function() {
      QuizPlay = Polymer({
        is: 'quiz-play',

        properties : {
          questions: {
            type: Array,
            value: function() {
              return [];
            }
          },
          questionNumber: {
            type: Number,
            value: 1
          }
        },

        ready: function() {
          this.$.countdown.addEventListener('finished', $.proxy(this.finish, this));
        },

        back: function() {
          var pages = document.getElementById('page-question');
          pages.selectPrevious();
          this.questionNumber = (this.questionNumber - 1 < 1) ? this.questions.length : this.questionNumber - 1;
        },

        forward: function() {
          var pages = document.getElementById('page-question');
          pages.selectNext();
          this.questionNumber = (this.questionNumber + 1 > this.questions.length) ? 1 : this.questionNumber + 1;
        },

        mudou: function(e) {
          console.log(e.target);
        },

        finish: function() {
          app.route = 'finish';

          for (var i=0; i< this.questions.length; i++) {
            var question = this.questions[i];
            console.log(question.alternatives);
          }

          this.destroyQuiz();
        },

        destroyQuiz: function() {
          Polymer.dom(document.body).removeChild(this);
        }
      });
    })();
  </script>

</dom-module>
